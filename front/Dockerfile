FROM node:15.5.1-alpine

ARG WORKDIR
ARG CONTAINER_PORT
ARG API_URL

ENV HOME=/${WORKDIR} 
ENV LANG=C.UTF-8 
ENV TZ=Asia/Tokyo 
ENV HOST=0.0.0.0
ENV API_URL=${API_URL}
  
WORKDIR ${HOME}

COPY package.json ./
COPY yarn.lock ./
RUN yarn install
COPY . .

RUN yarn run build

EXPOSE ${CONTAINER_PORT}
